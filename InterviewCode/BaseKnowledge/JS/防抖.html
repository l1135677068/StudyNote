<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <p>防抖： 在一段时间内，多次触发同一个事件，只执行最后一次事件触发的代码</p>
    <script>
        // 在一段时间内，多次触发同一个事件，只执行最后一次事件触发的代码
        // 复用性不强 使用闭包解决复用性
       // var timer;
       // function debouce(fn, delay) {
       //
       //     if (timer) clearTimeout(timer);
       //     timer = setTimeout(function () {
       //         fn();
       //     }, delay);
       // }
       //  name = "fksd;l";
       //  var ob = {
       //      name: 'mike',
       //      fun: debouce,
       //  }
        var name = "window";
        function debouce(fn, delay) {
            var timer;
            var thisDebouce = this;
            return function () {
                // 获得调用debouce的对象
                var _this = thisDebouce
                var args = arguments;
                if (timer) {
                    clearTimeout(timer);
                }
                timer = setTimeout(function () {
                    // 改变this指向，使得调用变为a.fn(), 使用apply还可以传递参数
                    fn.apply(_this, args);
                }, delay);
            };
        }
        function print(content) {
            console.log(content);
        }
        // 获得闭包
        // var testDebouce = ob.fun(print, 1000);
        var testDebouce = debouce(print, 1000);
        window.onmousemove = () => {
            testDebouce("fsdfds") // 给防抖函数传参
        }
    </script>
</body>
</html>
